@model AddUserVM

<div class="container-fluid">
    <!-- Header -->
    <div class="dashboard-header mb-4">
        <div>
            <h4 class="mb-2 fw-bold">Admin Dashboard</h4>
            <h6 class="text-muted mb-1">Welcome back, <span class="text-dark fw-semibold">System Administrator</span></h6>
            <span class="badge bg-light text-dark border">
                <i class="bi bi-shield-check me-1"></i>
                Full Access
            </span>
        </div>
    </div>

    <!-- Row 1: Key Metrics (4 cards) -->
    <div class="row g-4 mb-4">
        <!-- Total Users -->
        <div class="col-12 col-sm-6 col-lg-3">
            <div class="stat-card position-relative">
                <div class="card-body">
                    <h6 class="card-title text-muted mb-3">Total Users</h6>
                    <h2 class="mb-0 fw-bold">0</h2>
                    <p class="text-muted small mb-0 mt-2">
                        <i class="bi bi-arrow-up-circle me-1 text-success"></i>
                        <span class="text-success">+5%</span> from last month
                    </p>
                </div>
                <div class="icon-overlay" style="background: linear-gradient(135deg, #6d54d4 0%, #5a45b8 100%);">
                    <i class="bi bi-people"></i>
                </div>
            </div>
        </div>

        <!-- Active Doctors -->
        <div class="col-12 col-sm-6 col-lg-3">
            <div class="stat-card position-relative">
                <div class="card-body">
                    <h6 class="card-title text-muted mb-3">Active Doctors</h6>
                    <h2 class="mb-0 fw-bold">0</h2>
                    <p class="text-muted small mb-0 mt-2">
                        <i class="bi bi-person-badge me-1"></i>
                        <span>Currently active</span>
                    </p>
                </div>
                <div class="icon-overlay" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                    <i class="bi bi-person-badge"></i>
                </div>
            </div>
        </div>

        <!-- Total Appointments Today -->
        <div class="col-12 col-sm-6 col-lg-3">
            <div class="stat-card position-relative">
                <div class="card-body">
                    <h6 class="card-title text-muted mb-3">Appointments Today</h6>
                    <h2 class="mb-0 fw-bold">0</h2>
                    <p class="text-muted small mb-0 mt-2">
                        <i class="bi bi-calendar-day me-1"></i>
                        <span>Across all doctors</span>
                    </p>
                </div>
                <div class="icon-overlay" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);">
                    <i class="bi bi-calendar-check"></i>
                </div>
            </div>
        </div>

        <!-- Total Patients -->
        <div class="col-12 col-sm-6 col-lg-3">
            <div class="stat-card position-relative">
                <div class="card-body">
                    <h6 class="card-title text-muted mb-3">Total Patients</h6>
                    <h2 class="mb-0 fw-bold">0</h2>
                    <p class="text-muted small mb-0 mt-2">
                        <i class="bi bi-arrow-up-circle me-1 text-success"></i>
                        <span class="text-success">+12%</span> from last month
                    </p>
                </div>
                <div class="icon-overlay" style="background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);">
                    <i class="bi bi-person-heart"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Row 2: Secondary Metrics (4 cards) -->
    <div class="row g-4 mb-4">
        <!-- Pending Appointments -->
        <div class="col-12 col-sm-6 col-lg-3">
            <div class="stat-card position-relative">
                <div class="card-body">
                    <h6 class="card-title text-muted mb-3">Pending Approval</h6>
                    <h2 class="mb-0 fw-bold">0</h2>
                    <p class="text-muted small mb-0 mt-2">
                        <i class="bi bi-clock-history me-1"></i>
                        <span>Awaiting confirmation</span>
                    </p>
                </div>
                <div class="icon-overlay" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                    <i class="bi bi-hourglass-split"></i>
                </div>
            </div>
        </div>

        <!-- Completed Today -->
        <div class="col-12 col-sm-6 col-lg-3">
            <div class="stat-card position-relative">
                <div class="card-body">
                    <h6 class="card-title text-muted mb-3">Completed Today</h6>
                    <h2 class="mb-0 fw-bold">0</h2>
                    <p class="text-muted small mb-0 mt-2">
                        <i class="bi bi-check-circle me-1 text-success"></i>
                        <span>Successfully finished</span>
                    </p>
                </div>
                <div class="icon-overlay" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                    <i class="bi bi-check-circle"></i>
                </div>
            </div>
        </div>

        <!-- Cancelled This Week -->
        <div class="col-12 col-sm-6 col-lg-3">
            <div class="stat-card position-relative">
                <div class="card-body">
                    <h6 class="card-title text-muted mb-3">Cancelled This Week</h6>
                    <h2 class="mb-0 fw-bold">0</h2>
                    <p class="text-muted small mb-0 mt-2">
                        <i class="bi bi-arrow-down-circle me-1 text-danger"></i>
                        <span class="text-danger">-3%</span> from last week
                    </p>
                </div>
                <div class="icon-overlay" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">
                    <i class="bi bi-x-circle"></i>
                </div>
            </div>
        </div>

        <!-- Average Wait Time -->
        <div class="col-12 col-sm-6 col-lg-3">
            <div class="stat-card position-relative">
                <div class="card-body">
                    <h6 class="card-title text-muted mb-3">Avg. Wait Time</h6>
                    <h2 class="mb-0 fw-bold">0<span class="fs-6 text-muted"> min</span></h2>
                    <p class="text-muted small mb-0 mt-2">
                        <i class="bi bi-speedometer me-1"></i>
                        <span>Patient experience metric</span>
                    </p>
                </div>
                <div class="icon-overlay" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);">
                    <i class="bi bi-speedometer"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Row 3: Charts Row (2 cards side by side) -->
    <div class="row g-4 mb-4">
        <!-- Appointments Overview Chart -->
        <div class="col-12 col-lg-8">
            <div class="chart-card">
                <div class="card-header">
                    <h5 class="mb-0 fw-bold">
                        <i class="bi bi-graph-up me-2"></i>
                        Appointments Overview
                    </h5>
                    <div class="btn-group btn-group-sm" role="group">
                        <button type="button" class="btn btn-outline-secondary">Week</button>
                        <button type="button" class="btn btn-outline-secondary active">Month</button>
                        <button type="button" class="btn btn-outline-secondary">Year</button>
                    </div>
                </div>
                <div class="card-body">
                    <canvas id="appointmentsChart" height="80"></canvas>
                </div>
            </div>
        </div>

        <!-- Department Distribution -->
        <div class="col-12 col-lg-4">
            <div class="chart-card">
                <div class="card-header">
                    <h5 class="mb-0 fw-bold">
                        <i class="bi bi-pie-chart me-2"></i>
                        Department Distribution
                    </h5>
                </div>
                <div class="card-body">
                    <canvas id="departmentChart" height="200"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Row 4: Recent Activity & Quick Actions -->
    <div class="row g-4 mb-4">
        <!-- Recent User Activity -->
        <div class="col-12 col-lg-6">
            <div class="activity-card">
                <div class="card-header">
                    <h5 class="mb-0 fw-bold">
                        <i class="bi bi-activity me-2"></i>
                        Recent Activity
                    </h5>
                    <a href="#" class="btn btn-outline-secondary btn-sm">View All</a>
                </div>
                <div class="card-body p-0">
                    <div class="activity-list">
                        <!-- Activity Item -->
                        <div class="activity-item">
                            <div class="activity-icon bg-success-subtle">
                                <i class="bi bi-person-plus-fill text-success"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-text">
                                    <strong>Dr. John Smith</strong> was added to the system
                                </div>
                                <div class="activity-time">2 hours ago</div>
                            </div>
                        </div>

                        <div class="activity-item">
                            <div class="activity-icon bg-primary-subtle">
                                <i class="bi bi-calendar-check-fill text-primary"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-text">
                                    <strong>15 appointments</strong> scheduled for tomorrow
                                </div>
                                <div class="activity-time">3 hours ago</div>
                            </div>
                        </div>

                        <div class="activity-item">
                            <div class="activity-icon bg-warning-subtle">
                                <i class="bi bi-exclamation-triangle-fill text-warning"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-text">
                                    <strong>System backup</strong> completed successfully
                                </div>
                                <div class="activity-time">5 hours ago</div>
                            </div>
                        </div>

                        <div class="activity-item">
                            <div class="activity-icon bg-danger-subtle">
                                <i class="bi bi-x-circle-fill text-danger"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-text">
                                    <strong>User account</strong> for Jane Doe deactivated
                                </div>
                                <div class="activity-time">1 day ago</div>
                            </div>
                        </div>

                        <div class="activity-item">
                            <div class="activity-icon bg-info-subtle">
                                <i class="bi bi-gear-fill text-info"></i>
                            </div>
                            <div class="activity-content">
                                <div class="activity-text">
                                    <strong>Working hours</strong> updated for next week
                                </div>
                                <div class="activity-time">2 days ago</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="col-12 col-lg-6">
            <div class="quick-actions-card">
                <div class="card-header">
                    <h5 class="mb-0 fw-bold">
                        <i class="bi bi-lightning-charge me-2"></i>
                        Quick Actions
                    </h5>
                </div>
                <div class="card-body">
                    <div class="quick-actions-grid">
                        <!-- Action Button -->
                        <button class="quick-action-btn" data-bs-toggle="modal" data-bs-target="#addUserModal">
                            <div class="action-icon" style="background: linear-gradient(135deg, #6d54d4 0%, #5a45b8 100%);">
                                <i class="bi bi-person-plus"></i>
                            </div>
                            <div class="action-label">Add User</div>
                        </button>

                        <partial name="_AddUser" model="Model" />

                        <button class="quick-action-btn">
                            <div class="action-icon" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                                <i class="bi bi-calendar-plus"></i>
                            </div>
                            <div class="action-label">New Appointment</div>
                        </button>

                        <button class="quick-action-btn">
                            <div class="action-icon" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);">
                                <i class="bi bi-file-earmark-text"></i>
                            </div>
                            <div class="action-label">Generate Report</div>
                        </button>

                        <button class="quick-action-btn">
                            <div class="action-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                                <i class="bi bi-gear"></i>
                            </div>
                            <div class="action-label">System Settings</div>
                        </button>

                        <button class="quick-action-btn">
                            <div class="action-icon" style="background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);">
                                <i class="bi bi-person-heart"></i>
                            </div>
                            <div class="action-label">Patient Records</div>
                        </button>

                        <button class="quick-action-btn">
                            <div class="action-icon" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);">
                                <i class="bi bi-journal-text"></i>
                            </div>
                            <div class="action-label">View Logs</div>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Row 5: System Status -->
    <div class="row g-4">
        <div class="col-12">
            <div class="system-status-card">
                <div class="card-header">
                    <h5 class="mb-0 fw-bold">
                        <i class="bi bi-server me-2"></i>
                        System Status
                    </h5>
                    <span class="badge bg-success">
                        <i class="bi bi-check-circle me-1"></i>
                        All Systems Operational
                    </span>
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <!-- Status Item -->
                        <div class="col-12 col-md-6 col-lg-3">
                            <div class="status-item">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="status-label">Database</span>
                                    <span class="badge bg-success-subtle text-success">Healthy</span>
                                </div>
                                <div class="progress" style="height: 8px;">
                                    <div class="progress-bar bg-success" style="width: 95%"></div>
                                </div>
                                <div class="status-detail mt-1">95% Available</div>
                            </div>
                        </div>

                        <div class="col-12 col-md-6 col-lg-3">
                            <div class="status-item">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="status-label">Server</span>
                                    <span class="badge bg-success-subtle text-success">Online</span>
                                </div>
                                <div class="progress" style="height: 8px;">
                                    <div class="progress-bar bg-success" style="width: 98%"></div>
                                </div>
                                <div class="status-detail mt-1">98% Uptime</div>
                            </div>
                        </div>

                        <div class="col-12 col-md-6 col-lg-3">
                            <div class="status-item">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="status-label">Storage</span>
                                    <span class="badge bg-warning-subtle text-warning">Moderate</span>
                                </div>
                                <div class="progress" style="height: 8px;">
                                    <div class="progress-bar bg-warning" style="width: 72%"></div>
                                </div>
                                <div class="status-detail mt-1">72% Used</div>
                            </div>
                        </div>

                        <div class="col-12 col-md-6 col-lg-3">
                            <div class="status-item">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="status-label">Backup</span>
                                    <span class="badge bg-success-subtle text-success">Updated</span>
                                </div>
                                <div class="progress" style="height: 8px;">
                                    <div class="progress-bar bg-success" style="width: 100%"></div>
                                </div>
                                <div class="status-detail mt-1">Last: 2 hours ago</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Show/hide doctor fields based on role selection
        document.querySelectorAll('input[name="UserRole"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const doctorFields = document.getElementById('doctorFields');
                if (this.value === 'Doctor') {
                    doctorFields.style.display = 'block';
                    document.getElementById('specialty').setAttribute('required', 'required');
                } else {
                    doctorFields.style.display = 'none';
                    document.getElementById('specialty').removeAttribute('required');
                }
            });
        });
    </script>
}